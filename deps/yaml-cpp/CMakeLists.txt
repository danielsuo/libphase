cmake_minimum_required (VERSION 3.1)

include (ExternalProject)

set (YAML_CPP_EXTERNAL_PROJECT yaml-cpp-git)
message (${CMAKE_CURRENT_BINARY_DIR})
set (YAML_CPP_SOURCE_DIR ${CMAKE_CURRENT_BINARY_DIR}/${YAML_CPP_EXTERNAL_PROJECT}-prefix/src/${YAML_CPP_EXTERNAL_PROJECT})

ExternalProject_Add (
  ${YAML_CPP_EXTERNAL_PROJECT}
  GIT_REPOSITORY "https://github.com/jbeder/yaml-cpp"
  GIT_TAG "master"
  BUILD_IN_SOURCE 1
  UPDATE_COMMAND ""
  CONFIGURE_COMMAND cmake -DYAML_BUILD_SHARED_LIBS=ON .
  BUILD_COMMAND make -j
  #CONFIGURE_COMMAND "cd ${YAML_CPP_SOURCE_DIR} && mkdir build && cd build && cmake .."
  #BUILD_COMMAND "cd ${YAML_CPP_SOURCE_DIR} && make -j"
  INSTALL_COMMAND ""
  )

set (YAML_CPP_EXTERNAL_PROJECT ${YAML_CPP_EXTERNAL_PROJECT} PARENT_SCOPE)
set (YAML_CPP_INCLUDE_DIRS ${YAML_CPP_SOURCE_DIR}/include PARENT_SCOPE)
set (YAML_CPP_LIBRARY_DIRS ${YAML_CPP_SOURCE_DIR} PARENT_SCOPE)

